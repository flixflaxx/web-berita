<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>DailyUpdate</title>
  <!-- Bootstrap 4 CDN -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <style>
    body {
      background-color: #f8f9fa;
    }
    .news-card {
      height: 100%;
    }
    .news-img {
      height: 180px;
      object-fit: cover;
    }
    footer {
      background: #343a40;
      color: #fff;
      padding: 15px 0;
      text-align: center;
      margin-top: 30px;
    }
  </style>
</head>
<body>

  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <a class="navbar-brand" href="#">DailyUpdate</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarContent">
      <span class="navbar-toggler-icon"></span>
    </button>
    
    <div class="collapse navbar-collapse" id="navbarContent">
      <!-- Pilihan Kategori -->
      <ul class="navbar-nav mr-auto">
        <li class="nav-item"><a class="nav-link category-link" href="#" data-category="tesla">Tesla</a></li>
        <li class="nav-item"><a class="nav-link category-link" href="#" data-category="technology">Technology</a></li>
        <li class="nav-item"><a class="nav-link category-link" href="#" data-category="sports">Sports</a></li>
        <li class="nav-item"><a class="nav-link category-link" href="#" data-category="business">Business</a></li>
        <li class="nav-item"><a class="nav-link category-link" href="#" data-category="health">Health</a></li>
        <li class="nav-item"><a class="nav-link category-link" href="#" data-category="entertainment">Entertainment</a></li>
      </ul>
      
      <!-- Search Form -->
      <form class="form-inline my-2 my-lg-0" id="searchForm">
        <input class="form-control mr-sm-2" type="search" placeholder="Search news..." aria-label="Search" id="searchInput">
        <button class="btn btn-outline-light my-2 my-sm-0" type="submit">Search</button>
      </form>
    </div>
  </nav>

  <!-- News Section -->
  <div class="container my-4">
    <div class="row" id="newsContainer">
      <!-- News cards will be injected here -->
    </div>
  </div>

  <!-- Footer -->
  <footer class="bg-dark text-light pt-4">
    <div class="container">
      <div class="row">
        <!-- Hak Cipta -->
        <div class="col-md-4 mb-3">
          <h6>DailyUpdate</h6>
          <p class="small">Â© 2025 DailyUpdate. Semua hak cipta dilindungi.</p>
        </div>
        <!-- Kontak -->
        <div class="col-md-4 mb-3">
          <h6>Kontak</h6>
          <ul class="list-unstyled small">
            <li><a href="#" class="text-light">Email: dukid1340@gmail.com</a></li>
            <li><a href="#" class="text-light">Telepon: +62 895 2720 4180</a></li>
          </ul>
        </div>
        <!-- Sosial Media -->
        <div class="col-md-4 mb-3">
          <h6>Ikuti Kami</h6>
          <a href="#" class="text-light mr-3">Facebook</a>
          <a href="#" class="text-light mr-3">Twitter</a>
          <a href="#" class="text-light">Instagram</a>
        </div>
      </div>
    </div>
  </footer>

  <!-- jQuery & Bootstrap JS -->
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Fetch News API -->
  <script>
  const apiKey = "1b23180e75c14b8aae77473684a17643";
  const newsContainer = document.getElementById("newsContainer");
  const searchInput = document.getElementById("searchInput");
  let allArticles = []; // simpan semua artikel

  // Fetch and display news
  async function fetchNews(query = "tesla") {
    newsContainer.innerHTML = "<div class='col-12 text-center'><div class='spinner-border text-dark'></div></div>";
    try {
      let url = `https://newsapi.org/v2/everything?q=${query}&sortBy=publishedAt&apiKey=${apiKey}`;
      let response = await fetch(url);
      let data = await response.json();
      allArticles = data.articles || [];
      displayNews(allArticles);
    } catch (error) {
      newsContainer.innerHTML = "<p class='text-danger'>Failed to load news.</p>";
    }
  }

  // Display news in cards
  function displayNews(articles) {
    newsContainer.innerHTML = "";
    if (!articles || articles.length === 0) {
      newsContainer.innerHTML = "<p class='text-muted'>No news found.</p>";
      return;
    }
    articles.slice(0, 20).forEach(article => {
      let card = `
        <div class="col-md-4 col-sm-6 mb-4 d-flex">
          <div class="card news-card flex-fill shadow-sm">
            <img src="${article.urlToImage || 'https://via.placeholder.com/400x200'}" class="card-img-top news-img" alt="News Image">
            <div class="card-body d-flex flex-column">
              <h5 class="card-title">${article.title || "No Title"}</h5>
              <p class="card-text text-muted"><small>${new Date(article.publishedAt).toLocaleDateString()}</small></p>
              <p class="card-text">${article.description ? article.description.substring(0, 100) + "..." : "No description available."}</p>
              <a href="${article.url}" target="_blank" class="btn btn-primary mt-auto">Read More</a>
            </div>
          </div>
        </div>
      `;
      newsContainer.innerHTML += card;
    });
  }

  // Search form (API fetch ketika submit)
  document.getElementById("searchForm").addEventListener("submit", function(e) {
    e.preventDefault();
    let query = searchInput.value.trim();
    if (query) {
      fetchNews(query);
    }
  });

  // ðŸ” Real-time filter client-side
  searchInput.addEventListener("input", function () {
    let keyword = this.value.toLowerCase();
    if (!keyword) {
      displayNews(allArticles);
      return;
    }
    let filtered = allArticles.filter(article => {
      let title = (article.title || "").toLowerCase();
      let desc = (article.description || "").toLowerCase();
      return title.includes(keyword) || desc.includes(keyword);
    });
    displayNews(filtered);
  });

  // Klik kategori di navbar
  document.querySelectorAll(".category-link").forEach(link => {
    link.addEventListener("click", function(e) {
      e.preventDefault();
      let category = this.getAttribute("data-category");
      fetchNews(category);
    });
  });

  // Load default news
  fetchNews();
  </script>

</body>
</html>
