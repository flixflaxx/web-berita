<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>DailyUpdate</title>

  <!-- Bootstrap 4 -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" />
  <style>
    body { background-color: #f8f9fa; }
    .news-card { height: 100%; }
    .news-img { height: 180px; object-fit: cover; }
    footer {
      background: #343a40;
      color: #fff;
      padding: 15px 0;
      text-align: center;
      margin-top: 30px;
    }
  </style>
</head>
<body>

  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <a class="navbar-brand" href="#">DailyUpdate</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarContent">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarContent">
      <ul class="navbar-nav mr-auto">
        <li class="nav-item"><a class="nav-link category-link" href="#" data-category="tesla">Tesla</a></li>
        <li class="nav-item"><a class="nav-link category-link" href="#" data-category="technology">Technology</a></li>
        <li class="nav-item"><a class="nav-link category-link" href="#" data-category="sports">Sports</a></li>
        <li class="nav-item"><a class="nav-link category-link" href="#" data-category="business">Business</a></li>
        <li class="nav-item"><a class="nav-link category-link" href="#" data-category="health">Health</a></li>
        <li class="nav-item"><a class="nav-link category-link" href="#" data-category="entertainment">Entertainment</a></li>
      </ul>

      <form class="form-inline my-2 my-lg-0" id="searchForm">
        <input class="form-control mr-sm-2" type="search" placeholder="Search news..." id="searchInput" />
        <button class="btn btn-outline-light my-2 my-sm-0" type="submit">Search</button>
      </form>
    </div>
  </nav>

  <!-- News Section -->
  <div class="container my-4">
    <div class="row" id="newsContainer"></div>
  </div>

  <!-- Footer -->
  <footer class="bg-dark text-light pt-4">
    <div class="container">
      <div class="row">
        <div class="col-md-4 mb-3">
          <h6>DailyUpdate</h6>
          <p class="small">Â© 2025 DailyUpdate. Semua hak cipta dilindungi.</p>
        </div>
        <div class="col-md-4 mb-3">
          <h6>Kontak</h6>
          <ul class="list-unstyled small">
            <li><a href="#" class="text-light">Email: dukid1340@gmail.com</a></li>
            <li><a href="#" class="text-light">Telepon: +62 895 2720 4180</a></li>
          </ul>
        </div>
        <div class="col-md-4 mb-3">
          <h6>Ikuti Kami</h6>
          <a href="#" class="text-light mr-3">Facebook</a>
          <a href="#" class="text-light mr-3">Twitter</a>
          <a href="#" class="text-light">Instagram</a>
        </div>
      </div>
    </div>
  </footer>

  <!-- Scripts -->
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    const apiKey = "1b23180e75c14b8aae77473684a17643";
    const newsContainer = document.getElementById("newsContainer");
    const searchInput = document.getElementById("searchInput");
    let allArticles = [];

    async function fetchNews(query = "tesla") {
      newsContainer.innerHTML = "<div class='col-12 text-center'><div class='spinner-border text-dark'></div></div>";
      try {
        let url = `https://newsapi.org/v2/everything?q=${query}&sortBy=publishedAt&apiKey=${apiKey}`;
        let response = await fetch(url);
        let data = await response.json();
        allArticles = data.articles || [];
        displayNews(allArticles);
      } catch {
        newsContainer.innerHTML = "<p class='text-danger'>Failed to load news.</p>";
      }
    }

    function displayNews(articles) {
      newsContainer.innerHTML = "";
      if (!articles.length) {
        newsContainer.innerHTML = "<p class='text-muted'>No news found.</p>";
        return;
      }
      articles.slice(0, 20).forEach(a => {
        newsContainer.innerHTML += `
          <div class="col-md-4 col-sm-6 mb-4 d-flex">
            <div class="card news-card flex-fill shadow-sm">
              <img src="${a.urlToImage || 'https://via.placeholder.com/400x200'}" class="card-img-top news-img" alt="">
              <div class="card-body d-flex flex-column">
                <h5 class="card-title">${a.title || "No Title"}</h5>
                <p class="card-text text-muted"><small>${new Date(a.publishedAt).toLocaleDateString()}</small></p>
                <p class="card-text">${a.description ? a.description.substring(0, 100) + "..." : "No description."}</p>
                <a href="${a.url}" target="_blank" class="btn btn-primary mt-auto">Read More</a>
              </div>
            </div>
          </div>`;
      });
    }

    document.getElementById("searchForm").addEventListener("submit", e => {
      e.preventDefault();
      let q = searchInput.value.trim();
      if (q) fetchNews(q);
    });

    searchInput.addEventListener("input", function () {
      let k = this.value.toLowerCase();
      if (!k) return displayNews(allArticles);
      displayNews(allArticles.filter(a =>
        (a.title || "").toLowerCase().includes(k) ||
        (a.description || "").toLowerCase().includes(k)
      ));
    });

    document.querySelectorAll(".category-link").forEach(link => {
      link.addEventListener("click", e => {
        e.preventDefault();
        fetchNews(link.dataset.category);
      });
    });

    fetchNews();
  </script>
</body>
</html>
